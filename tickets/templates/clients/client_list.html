{% extends "base.html" %}
{% block title %}Clients{% endblock %}
{% block content %}
<h1>Clients</h1>
<a href="{% url 'tickets:client_create' %}" class="btn btn-primary mb-3">Nouveau client</a>
<form method="get" class="mb-3 d-flex gap-2">
  <input type="search" name="q" value="{{ request.GET.q }}" class="form-control" placeholder="Rechercher (nom, société, téléphone)…">
  <button class="btn btn-outline-primary" type="submit">Rechercher</button>
  {% if request.GET.q %}
    <a class="btn btn-outline-secondary" href="{% url 'tickets:client_list' %}">Réinitialiser</a>
  {% endif %}
</form>
<table class="table table-striped">
  <thead>
    <tr>
      <th>Nom</th>
      <th>Téléphone</th>
      <th>Entreprise</th>
    </tr>
  </thead>
  <tbody>
    {% for client in object_list %}
      <tr>
        <td><a href="{% url 'tickets:client_detail' client.id %}">{{ client.name }}</a></td>
        <td>{{ client.phone_number }}</td>
        <td>{{ client.company }}</td>
      </tr>
    {% empty %}
      <tr><td colspan="3">Aucun client trouvé</td></tr>
    {% endfor %}
  </tbody>
</table>
{% endblock %}
